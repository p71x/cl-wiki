=========   ---------------------------
 CL-WIKI    Wiki Engine for Common Lisp
=========   ---------------------------

This is version 0.4.x alpha of cl-wiki. It is incompatible with previous 
0.3.x versions of cl wiki. Markup of pages was totally changed.

Dependencies
============

It uses Hunchentoot (1.2.x), CL-PPCRE, CL-WHO (min. 0.6.0), 
and CL-EMB (min. 0.4.2), colorize – all of them available in quicklisp.

Quick start
===========

        (asdf:operate 'asdf:load-op :cl-wiki)
        ;; Write config file "wiki.conf" in current directory with at least
        ;; (base (directory "/path/to/wiki-data/"))
        ;; ...
        (wiki:start)

or using quicklisp:
   
	(push #p"your_path_to_clwiki_code/cl-wiki/" asdf:*central-registry*)
	(ql:quickload :cl-wiki)
        (wiki:start #p"your_path_to_clwiki_config/wiki.conf")


Then direct your browser to http://localhost:5757/Somepage


CL-WIKI uses Hunchentoot <http://weitz.de/hunchentoot/>. The example above
runs it without any front-end. But you can install it for use with Apache and
mod_lisp, too. See Hunchentoot's documentation.

Syntax highlighting via https://github.com/redline6561/colorize loaded via quicklisp.org

Config
======

File "wiki.conf" in current directory or in path given as parameter to `wiki:start`.
Example:

  ;; Config file for CL-WIKI -- Wiki engine for Common Lisp
  (base (port 5757
         directory "/home/stesch/wiki-data"
         url "/cl-wiki/"
         page-list ((title "Home"    link "Home")
                    (title "About"   link "About")
                    (title "Contact" link "Contact"))))


The following parameters can be set with the config file:

Section: base
-------------
directory       Base directory for the wiki data, like pages, etc.

port            TCP/IP port CL-WIKI will listen to. Attention: listens
                on every interface.

template-directory      Base directory for templates.

page-list       List of title-link pairs with links that get displayed on
                the top and bottom of every page. See example above how to
                set this.

reverse-proxy   Indicates if CL-WIKI runs behind a reverse proxy.
                Default is NIL. Set it to t when behind a proxy.

home-page       Default page when root directory of the site is accessed.

edit-textarea-size      Plist of size of edit textarea.
                        Default is (:rows 25 :cols 80).


Textformatting
==============

Content of page is written as s-expressions. Symbols can be written with 
or without colon. They are interned in „keywords” package. In all places 
where is "text" there can be more of them and they can be mixed with markup, 
they are all concatenated.

(:wiki "name")                  ==> Generates a link to named page.
(:wiki "name" "text")           ==> Generates a link to named page
                                    and links Text.
(:link "url" "text")            ==> Inserts external link
(:em "text")                    ==> emphasize text (<em>text</em>) 
                                    -- on most browsers italic
(:strong "text")                ==> stronger emphasize text
                                    (<strong>text</strong>)
                                    -- on most browsers bold
(:sub "text")                   ==> subscripting x
(:sup "text")                   ==> superscripting x
(:s "text")                     ==> strike out text
(:u "text")                     ==> underline text
(:del "text")                   ==> Mark text as deleted
(:ins "text")                   ==> Mark text as inserted
(:br)                           ==> Start a new line
(:hr)                           ==> Horizontal line

(ul ...), (ol ...), (li ...)    ==> Unordered and ordered list, list item

(section ...)                   ==> No visual rendering, increments header level
(title "text")                  ==> Header, level dependent of sections nesting level

(source "lang" "source")        ==> Sourcecode snippet, colorized for the
                                    named language LANG. For now its necessary to manually 
               			    escape " inside. Snippet is surrounded by
                                    <div class="code"> ... </div>
                                    LANG must be one of (taken from colorize README):
				        Common Lisp,
					Emacs Lisp,
    					Scheme,
					Clojure, [alpha]
    					C,
    					C++,
    					Java,
    					Python,
    					Erlang,
    					Haskell,
    					Objective-C,
    					Diff,
    					Webkit.
				    If lang code is unrecognized, then no coloring is used.

Unrecognized tags are rendered as text. They must be well formed forms.

Philosophy
==========

The term "wiki wiki" and its meaning are well known. Quick. Quick to use
and quick to program. The first wiki was written in 30 lines of Perl
code.


Thanks
======
Kevin Griffin for tests with different CL implementations and
beeing an early adopter.
Ian Clelland for ideas, patches, etc.
Vehbi Sinan Tunalioglu for ideas, patches, etc.
Jens Teich reviving development, ideas, patches, etc.
Ralf Stoye for a patch to speedup regexps, which are heavily used in CL-WIKI.
